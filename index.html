<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EasyEats - Accessible Food Delivery</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');

        :root {
            --primary-color: #FF5722;
            --primary-hover: #E64A19;
            --secondary-color: #FAFAFA;
            --text-color: #333;
            --heading-color: #2c3e50;
            --accent-green: #4CAF50;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: #f8f9fa;
            color: var(--text-color);
            line-height: 1.6;
            padding: 0;
            margin: 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 0 20px 40px;
            box-shadow: none;
        }

        /* High contrast for better visibility */
        h1,
        h2,
        h3 {
            color: var(--heading-color);
            margin-bottom: 20px;
            font-weight: 700;
        }

        h1 {
            font-size: 2.5em;
            text-align: center;
            padding: 40px 0;
            color: var(--primary-color);
            border: none;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('assets/images/banners/photo-1504674900247-0877df9cc836.avif');
            background-size: cover;
            background-position: center;
            color: white;
            text-align: center;
            padding: 100px 20px;
            margin-bottom: 40px;
            border-radius: 0 0 20px 20px;
        }

        .hero h2 {
            font-size: 3em;
            color: white;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            border: none;
            padding: 0;
        }

        .hero p {
            font-size: 1.2em;
            margin-bottom: 30px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .cta-btn {
            background: var(--primary-color);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .cta-btn:hover {
            transform: scale(1.05);
            background: var(--primary-hover);
        }

        /* Voice control panel */
        .voice-panel {
            background: linear-gradient(135deg, #2196F3, #1976D2);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin: 0 20px 40px;
            text-align: center;
            box-shadow: var(--shadow);
        }

        .voice-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid white;
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            margin: 10px;
            backdrop-filter: blur(5px);
            transition: all 0.3s;
        }

        .voice-btn:hover {
            background: white;
            color: #1976D2;
        }

        .voice-btn.listening {
            background: #4CAF50;
            border-color: #4CAF50;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }
        }

        .status {
            font-size: 1.1em;
            margin-top: 15px;
            min-height: 25px;
            font-weight: 500;
            opacity: 0.9;
        }

        /* Navigation */
        nav {
            margin: 20px 0;
            border: 3px solid #000;
            border-radius: 8px;
            overflow: hidden;
        }

        nav button {
            background: #f0f0f0;
            border: none;
            padding: 20px 30px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            border-right: 3px solid #000;
            transition: all 0.3s;
        }

        nav button:last-child {
            border-right: none;
        }

        nav button:hover,
        nav button:focus {
            background: #4CAF50;
            color: white;
            outline: 4px solid #000;
        }

        nav button.active {
            background: #2196F3;
            color: white;
        }

        /* Menu items */
        .menu-grid {
            display: block;
            /* Changed from grid to block to support sections */
            margin-top: 25px;
        }

        .category-title {
            width: 100%;
            font-size: 1.8em;
            color: var(--primary-color);
            border-bottom: 2px solid var(--accent-green);
            padding-bottom: 10px;
            margin: 40px 0 20px;
        }

        .menu-category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
            padding: 10px;
            margin-bottom: 40px;
        }

        .menu-item {
            border: none;
            border-radius: 15px;
            background: white;
            transition: all 0.3s;
            overflow: hidden;
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
        }

        .menu-item:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .menu-item img {
            width: 100%;
            height: 220px;
            object-fit: cover;
            transition: transform 0.5s;
        }

        .menu-item:hover img {
            transform: scale(1.05);
        }

        .menu-item-content {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .menu-item h3 {
            font-size: 1.3em;
            margin-bottom: 8px;
            color: var(--heading-color);
        }

        .menu-meta {
            display: flex;
            gap: 15px;
            margin-bottom: 12px;
            font-size: 0.9em;
            color: #666;
        }

        .rating {
            color: #FFC107;
            font-weight: bold;
        }

        .menu-item .description {
            font-size: 0.95em;
            margin-bottom: 15px;
            color: #666;
            flex-grow: 1;
        }

        .menu-item .price {
            font-size: 1.4em;
            color: var(--primary-color);
            font-weight: 700;
            margin: 10px 0;
        }

        .menu-item button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px;
            font-size: 1em;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            transition: all 0.2s;
        }

        .menu-item button:hover {
            background: var(--primary-hover);
        }

        /* Cart */
        .cart {
            background: #fff3e0;
            border: 3px solid #FF9800;
            padding: 25px;
            border-radius: 8px;
            margin-top: 30px;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 2px solid #ddd;
            font-size: 1.1em;
        }

        .cart-item:last-child {
            border-bottom: none;
        }

        .cart-item button {
            background: #f44336;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 1em;
            font-weight: bold;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 10px;
        }

        .cart-item button:hover,
        .cart-item button:focus {
            background: #d32f2f;
            outline: 3px solid #000;
        }

        .cart-total {
            font-size: 1.5em;
            font-weight: bold;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 3px solid #FF9800;
        }

        .checkout-btn {
            background: #FF9800;
            color: white;
            border: none;
            padding: 20px 40px;
            font-size: 1.3em;
            font-weight: bold;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
            transition: all 0.3s;
        }

        .checkout-btn:hover,
        .checkout-btn:focus {
            background: #F57C00;
            outline: 4px solid #000;
            transform: scale(1.02);
        }

        .checkout-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        /* Settings */
        .settings {
            margin-top: 30px;
        }

        .setting-item {
            padding: 20px;
            border: 2px solid #ddd;
            margin-bottom: 15px;
            border-radius: 8px;
            background: #fafafa;
        }

        .setting-item label {
            display: block;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .setting-item select,
        .setting-item input {
            width: 100%;
            padding: 15px;
            font-size: 1.1em;
            border: 2px solid #ddd;
            border-radius: 5px;
            background: white;
        }

        .setting-item select:focus,
        .setting-item input:focus {
            outline: 3px solid #2196F3;
            border-color: #2196F3;
        }

        /* Screen reader only content */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Empty state */
        .empty-state {
            text-align: center;
            padding: 40px;
            color: #666;
            font-size: 1.2em;
        }

        /* Footer */
        footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 40px 20px;
            margin-top: 60px;
            border-radius: 8px;
        }

        .social-icons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .social-icons img {
            width: 30px;
            height: 30px;
            filter: brightness(0) invert(1);
            transition: opacity 0.3s;
        }

        .social-icons img:hover {
            opacity: 0.8;
        }

        footer p {
            opacity: 0.7;
        }

        /* Skip to content link */
        .skip-link {
            position: absolute;
            top: -50px;
            left: 0;
            background: var(--primary-color);
            color: white;
            padding: 15px;
            z-index: 1000;
            text-decoration: none;
            font-weight: bold;
            transition: top 0.3s;
        }

        .skip-link:focus {
            top: 0;
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            h1 {
                font-size: 2em;
                padding: 20px 0;
            }

            .hero {
                padding: 60px 20px;
            }

            .hero h2 {
                font-size: 2em;
            }

            .hero p {
                font-size: 1em;
            }

            .container {
                padding: 0 10px 20px;
            }

            /* Navigation Stack */
            nav {
                display: flex;
                flex-direction: column;
                border-radius: 8px;
                overflow: hidden;
            }

            nav button {
                width: 100%;
                border-right: none;
                border-bottom: 2px solid #000;
                padding: 15px;
            }

            nav button:last-child {
                border-bottom: none;
            }

            /* Voice Panel */
            .voice-panel {
                padding: 20px;
                margin: 0 10px 30px;
            }

            .voice-btn {
                width: 100%;
                margin: 10px 0;
                display: block;
            }

            /* Menu Grid */
            .menu-category-grid {
                grid-template-columns: 1fr;
                /* Single column on mobile */
                gap: 20px;
            }
        }
    </style>
</head>

<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <div class="container">
        <header>
            <h1 tabindex="0">üçî EasyEats</h1>
        </header>

        <!-- Voice Control Panel -->
        <div class="voice-panel" role="region" aria-label="Voice Control">
            <h2>Voice Control</h2>
            <p style="margin: 10px 0; font-size: 1.1em;">Say commands like: "Show menu", "Add pizza", "Show cart",
                "Checkout"</p>
            <button class="voice-btn" id="voiceBtn" aria-label="Start voice command">
                üé§ Start Voice Command
            </button>
            <button class="voice-btn" id="helpBtn" aria-label="Get voice command help">
                ‚ùì Voice Help
            </button>
            <div class="status" id="voiceStatus" role="status" aria-live="polite"></div>
        </div>

        <!-- Navigation -->
        <nav role="navigation" aria-label="Main navigation">
            <button id="menuTab" class="active" aria-label="View menu" aria-pressed="true">Menu</button>
            <button id="cartTab" aria-label="View cart" aria-pressed="false">Cart (<span
                    id="cartCount">0</span>)</button>
            <button id="settingsTab" aria-label="View settings" aria-pressed="false">Settings</button>
        </nav>

        <main id="main-content">
            <!-- Menu Section -->
            <section id="menuSection" aria-label="Food menu">
                <h2>Our Menu</h2>
                <div class="menu-grid" id="menuGrid"></div>
            </section>

            <!-- Cart Section -->
            <section id="cartSection" style="display: none;" aria-label="Shopping cart">
                <h2>Your Cart</h2>
                <div class="cart">
                    <div id="cartItems"></div>
                    <div class="cart-total" id="cartTotal" aria-live="polite">Total: $0.00</div>
                    <button class="checkout-btn" id="checkoutBtn" aria-label="Proceed to checkout">
                        Proceed to Checkout
                    </button>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settingsSection" style="display: none;" aria-label="App settings">
                <h2>Settings</h2>
                <div class="settings">
                    <div class="setting-item">
                        <label for="voiceSpeed">Voice Speed</label>
                        <select id="voiceSpeed" aria-describedby="voiceSpeedDesc">
                            <option value="0.8">Slow</option>
                            <option value="1" selected>Normal</option>
                            <option value="1.2">Fast</option>
                        </select>
                        <span id="voiceSpeedDesc" class="sr-only">Adjust how fast the app speaks to you</span>
                    </div>

                    <div class="setting-item">
                        <label for="voiceVolume">Voice Volume</label>
                        <select id="voiceVolume" aria-describedby="voiceVolumeDesc">
                            <option value="0.5">Quiet</option>
                            <option value="0.8">Medium</option>
                            <option value="1" selected>Loud</option>
                        </select>
                        <span id="voiceVolumeDesc" class="sr-only">Adjust voice volume</span>
                    </div>

                    <div class="setting-item">
                        <label for="deliveryAddress">Delivery Address</label>
                        <input type="text" id="deliveryAddress" placeholder="Enter your delivery address"
                            aria-describedby="addressDesc">
                        <span id="addressDesc" class="sr-only">Your food will be delivered to this address</span>
                    </div>

                    <div class="setting-item">
                        <label for="phoneNumber">Phone Number</label>
                        <input type="tel" id="phoneNumber" placeholder="Enter your phone number"
                            aria-describedby="phoneDesc">
                        <span id="phoneDesc" class="sr-only">We'll call you for delivery updates</span>
                    </div>

                    <div class="setting-item">
                        <label for="dietaryPrefs">Dietary Preferences</label>
                        <select id="dietaryPrefs" aria-describedby="dietDesc">
                            <option value="none">None</option>
                            <option value="vegetarian">Vegetarian</option>
                            <option value="vegan">Vegan</option>
                            <option value="gluten-free">Gluten Free</option>
                        </select>
                        <span id="dietDesc" class="sr-only">Filter menu items based on your dietary needs</span>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer role="contentinfo">
            <div class="social-icons">
                <a href="#" aria-label="Facebook"><img src="assets/icons/icon-facebook.svg" alt="Facebook"></a>
                <a href="#" aria-label="Instagram"><img src="assets/icons/icon-instagram.svg" alt="Instagram"></a>
                <a href="#" aria-label="Twitter"><img src="assets/icons/Twitter.svg" alt="Twitter"></a>
            </div>
            <p>&copy; 2026 EasyEats. Made with ‚ù§Ô∏è for everyone.</p>
        </footer>
    </div>

    <script>
        // Menu data
        const menuItems = [
            // South Indian
            { id: 10, name: 'Masala Dosa', price: 89, description: 'Crispy rice crepe filled with spiced potato masala', category: 'South Indian', image: 'assets/images/restaurants/Dosa.avif', rating: 4.7, time: '15-20 min' },
            { id: 11, name: 'Idli Sambar', price: 59, description: 'Steamed rice cakes served with lentil soup', category: 'South Indian', image: 'assets/images/restaurants/Idli.avif', rating: 4.5, time: '10-15 min' },
            { id: 13, name: 'Malabar Parotta', price: 40, description: 'Layered flatbread served with curry sauce', category: 'South Indian', image: 'assets/images/restaurants/Parotta.avif', rating: 4.8, time: '15-20 min' },
            { id: 17, name: 'Poori Masala', price: 80, description: 'Fried wheat bread served with potato masala', category: 'South Indian', image: 'assets/images/restaurants/Poori.avif', rating: 4.7, time: '15-20 min' },
            { id: 18, name: 'Onion Uttapam', price: 90, description: 'Thick rice pancake topped with onions and chilies', category: 'South Indian', image: 'assets/images/restaurants/Uthappam.avif', rating: 4.6, time: '15-20 min' },
            { id: 19, name: 'Ghee Roast Dosa', price: 110, description: 'Crispy dosa roasted with pure ghee', category: 'South Indian', image: 'assets/images/restaurants/Dosa.avif', rating: 4.9, time: '15-20 min' },
            { id: 20, name: 'Egg Parotta', price: 120, description: 'Minced parotta stir-fried with eggs and spices', category: 'South Indian', image: 'assets/images/restaurants/Parotta.avif', rating: 4.8, time: '20-25 min' },
            { id: 9, name: 'Chicken Biryani', price: 249, description: 'Aromatic basmati rice cooked with spices and chicken', category: 'South Indian', image: 'assets/images/restaurants/Biryani.avif', rating: 4.9, time: '30-40 min' },

            // Fast Food
            { id: 1, name: 'Margherita Pizza', price: 249, description: 'Classic tomato and mozzarella pizza', category: 'Fast Food', image: 'assets/images/restaurants/Pizza.avif', rating: 4.8, time: '20-30 min' },
            { id: 2, name: 'Pepperoni Pizza', price: 299, description: 'Loaded with pepperoni and cheese', category: 'Fast Food', image: 'assets/images/restaurants/6ef07bda-b707-48ea-9b14-2594071593d1_Pizzas.avif', rating: 4.9, time: '25-35 min' },
            { id: 3, name: 'Chicken Burger', price: 149, description: 'Grilled chicken with lettuce and mayo', category: 'Fast Food', image: 'assets/images/restaurants/Burger.avif', rating: 4.5, time: '15-20 min' },
            { id: 4, name: 'Cheese Burger', price: 129, description: 'Beef patty with cheese and pickles', category: 'Fast Food', image: 'assets/images/restaurants/8f508de7-e0ac-4ba8-b54d-def9db98959e_burger.avif', rating: 4.7, time: '15-20 min' },
            { id: 6, name: 'Pasta Alfredo', price: 199, description: 'Creamy alfredo sauce with fettuccine', category: 'Fast Food', image: 'assets/images/restaurants/Pasta.avif', rating: 4.7, time: '20-25 min' },
            { id: 12, name: 'Veg Noodles', price: 139, description: 'Stir-fried noodles with mixed vegetables', category: 'Fast Food', image: 'assets/images/restaurants/Noodles.avif', rating: 4.6, time: '20-25 min' },
            { id: 21, name: 'Chicken Shawarma', price: 149, description: 'Grilled chicken wrapped in pita bread with garlic sauce', category: 'Fast Food', image: 'assets/images/restaurants/Shawarma.avif', rating: 4.8, time: '10-15 min' },
            { id: 22, name: 'Veg Burger', price: 119, description: 'Crispy vegetable patty with fresh veggies', category: 'Fast Food', image: 'assets/images/restaurants/Burger.avif', rating: 4.5, time: '15-20 min' },

            // Snacks
            { id: 7, name: 'Chicken Wings', price: 179, description: 'Spicy buffalo wings with ranch', category: 'Snacks', image: 'assets/images/restaurants/Kebab.avif', rating: 4.8, time: '15-20 min' },
            { id: 8, name: 'French Fries', price: 79, description: 'Crispy golden fries', category: 'Snacks', image: 'assets/images/restaurants/Rolls.avif', rating: 4.4, time: '10-12 min' },
            { id: 23, name: 'Chicken Rolls', price: 99, description: 'Spiced chicken filling wrapped in a soft roti', category: 'Snacks', image: 'assets/images/restaurants/Rolls.avif', rating: 4.6, time: '10-15 min' },
            { id: 24, name: 'Grilled Kebabs', price: 219, description: 'Succulent pieces of marinated grilled chicken', category: 'Snacks', image: 'assets/images/restaurants/Kebab.avif', rating: 4.8, time: '20-25 min' },
            { id: 25, name: 'Hot Tea', price: 20, description: 'Freshly brewed aromatic tea', category: 'Snacks', image: 'assets/images/restaurants/Tea.avif', rating: 4.9, time: '5 min' },

            // Desserts
            { id: 14, name: 'Chocolate Shake', price: 99, description: 'Rich and creamy chocolate milkshake', category: 'Desserts', image: 'assets/images/restaurants/Shake.avif', rating: 4.7, time: '5-10 min' },
            { id: 15, name: 'Fruit Ice Cream', price: 69, description: 'Refreshing fruit flavored ice cream', category: 'Desserts', image: 'assets/images/restaurants/Ice Cream.avif', rating: 4.6, time: '5 min' },
            { id: 16, name: 'Chocolate Cake', price: 89, description: 'Decadent chocolate cake slice', category: 'Desserts', image: 'assets/images/restaurants/Cake.avif', rating: 4.8, time: '5 min' },
            { id: 26, name: 'Gulab Jamun', price: 60, description: 'Soft berry-sized balls dunked in rose flavored sugar syrup', category: 'Desserts', image: 'assets/images/restaurants/Gulab Jamun.avif', rating: 4.9, time: '5 min' },
            { id: 27, name: 'Cold Coffee', price: 89, description: 'Chilled coffee blend with milk and sugar', category: 'Desserts', image: 'assets/images/restaurants/Coffee.avif', rating: 4.7, time: '5-10 min' }
        ];

        let cart = [];
        let currentSection = 'menu';
        let lastSpoken = '';
        let voiceContext = null;

        // Speech synthesis settings
        let voiceSettings = {
            rate: 1,
            volume: 1
        };

        // Speak function
        function speak(text, onEndCallback = null) {
            if ('speechSynthesis' in window) {
                lastSpoken = text; // Store for repeat command
                window.speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.rate = voiceSettings.rate;
                utterance.volume = voiceSettings.volume;

                if (onEndCallback) {
                    utterance.onend = onEndCallback;
                }

                window.speechSynthesis.speak(utterance);
            }
        }

        // Update voice status
        function updateStatus(message, shouldSpeak = true) {
            const status = document.getElementById('voiceStatus');
            status.textContent = message;
            if (shouldSpeak) {
                speak(message);
            }
        }

        // Render menu
        function renderMenu() {
            const grid = document.getElementById('menuGrid');
            const categories = ['South Indian', 'Fast Food', 'Snacks', 'Desserts'];

            let html = '';

            categories.forEach(category => {
                const items = menuItems.filter(item => item.category === category);
                if (items.length > 0) {
                    html += `
                        <h2 class="category-title" tabindex="0">${category}</h2>
                        <div class="menu-category-grid">
                            ${items.map(item => `
                                <article class="menu-item" role="article" aria-label="${item.name}">
                                    <img src="${item.image}" alt="${item.name}" onclick="inspectItem(${item.id})" style="cursor: pointer;">
                                    <div class="menu-item-content">
                                        <div class="menu-meta">
                                            <span class="rating">‚òÖ ${item.rating}</span>
                                            <span class="time">üïí ${item.time}</span>
                                        </div>
                                        <h3 tabindex="0" onclick="inspectItem(${item.id})" style="cursor: pointer;">${item.name}</h3>
                                        <p class="description">${item.description}</p>
                                        <p class="price" aria-label="Price: ‚Çπ${item.price.toFixed(2)}">‚Çπ${item.price.toFixed(2)}</p>
                                        <button onclick="addToCart(${item.id})" aria-label="Add ${item.name} to cart for ‚Çπ${item.price.toFixed(2)}">
                                            Add to Cart
                                        </button>
                                    </div>
                                </article>
                            `).join('')}
                        </div>
                    `;
                }
            });

            grid.innerHTML = html;
        }

        // Inspect Item (Click Handler)
        function inspectItem(id) {
            const item = menuItems.find(i => i.id === id);
            if (!item) return;

            const message = `${item.name}. Preparation time ${item.time}. Rated ${item.rating} stars. Price is ‚Çπ${item.price}. Should I add this to your cart?`;

            voiceContext = { type: 'confirm_add', itemId: id };

            speak(message, () => {
                // Auto-start listening after speaking
                if (recognition) {
                    try {
                        recognition.start();
                    } catch (e) {
                        // Ignore if already started
                    }
                }
            });
            updateStatus(`Details: ${item.name}. Say 'Yes' to add.`, false);
        }

        // Add to cart (Confirmation Wrapper)
        function addToCart(itemId) {
            const item = menuItems.find(i => i.id === itemId);
            if (item) {
                const message = `Do you want to add ${item.name} to your cart?`;
                voiceContext = { type: 'confirm_add', itemId: itemId };
                speak(message, () => {
                    if (recognition) try { recognition.start(); } catch (e) { }
                });
                updateStatus(`Confirm: Add ${item.name}? Say 'Yes' or 'No'.`, false);
            }
        }

        // Execute Add to Cart (Actual Action)
        function executeAddToCart(itemId) {
            const item = menuItems.find(i => i.id === itemId);
            if (item) {
                cart.push({ ...item });
                updateCart();
                speak(`Added ${item.name} to cart for ‚Çπ${item.price.toFixed(2)}`);
                updateStatus(`${item.name} added to cart`);
            }
        }

        // Remove from cart (Confirmation Wrapper)
        function removeFromCart(index) {
            const item = cart[index];
            if (item) {
                const message = `Do you want to remove ${item.name} from your cart?`;
                voiceContext = { type: 'confirm_remove', index: index };
                speak(message, () => {
                    if (recognition) try { recognition.start(); } catch (e) { }
                });
                updateStatus(`Confirm: Remove ${item.name}? Say 'Yes' or 'No'.`, false);
            }
        }

        // Execute Remove from Cart (Actual Action)
        function executeRemoveFromCart(index) {
            const item = cart[index];
            if (item) {
                cart.splice(index, 1);
                updateCart();
                speak(`Removed ${item.name} from cart`);
                updateStatus(`${item.name} removed from cart`);
            }
        }

        // Update cart display
        function updateCart() {
            const cartItems = document.getElementById('cartItems');
            const cartCount = document.getElementById('cartCount');
            const cartTotal = document.getElementById('cartTotal');
            const checkoutBtn = document.getElementById('checkoutBtn');

            cartCount.textContent = cart.length;

            if (cart.length === 0) {
                cartItems.innerHTML = '<div class="empty-state">Your cart is empty</div>';
                cartTotal.textContent = 'Total: ‚Çπ0.00';
                checkoutBtn.disabled = true;
            } else {
                cartItems.innerHTML = cart.map((item, index) => `
                    <div class="cart-item">
                        <span><strong>${item.name}</strong> - ‚Çπ${item.price.toFixed(2)}</span>
                        <button onclick="removeFromCart(${index})" aria-label="Remove ${item.name} from cart">
                            Remove
                        </button>
                    </div>
                `).join('');

                const total = cart.reduce((sum, item) => sum + item.price, 0);
                cartTotal.textContent = `Total: ‚Çπ${total.toFixed(2)}`;
                checkoutBtn.disabled = false;
            }
        }

        // Switch sections
        function showSection(section) {
            // Hide all sections
            document.getElementById('menuSection').style.display = 'none';
            document.getElementById('cartSection').style.display = 'none';
            document.getElementById('settingsSection').style.display = 'none';

            // Update nav buttons
            document.querySelectorAll('nav button').forEach(btn => {
                btn.classList.remove('active');
                btn.setAttribute('aria-pressed', 'false');
            });

            // Show selected section
            if (section === 'menu') {
                document.getElementById('menuSection').style.display = 'block';
                document.getElementById('menuTab').classList.add('active');
                document.getElementById('menuTab').setAttribute('aria-pressed', 'true');
                speak('Showing menu');
            } else if (section === 'cart') {
                document.getElementById('cartSection').style.display = 'block';
                document.getElementById('cartTab').classList.add('active');
                document.getElementById('cartTab').setAttribute('aria-pressed', 'true');
                const count = cart.length;
                speak(`Showing cart. You have ${count} item${count !== 1 ? 's' : ''} in your cart`);
            } else if (section === 'settings') {
                document.getElementById('settingsSection').style.display = 'block';
                document.getElementById('settingsTab').classList.add('active');
                document.getElementById('settingsTab').setAttribute('aria-pressed', 'true');
                speak('Showing settings');
            }

            currentSection = section;
            voiceContext = null; // Clear context on navigation
        }

        // Voice recognition
        let recognition;
        if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            recognition = new SpeechRecognition();
            recognition.continuous = false;
            recognition.interimResults = false;
            recognition.lang = 'en-US';

            recognition.onstart = () => {
                document.getElementById('voiceBtn').classList.add('listening');
                document.getElementById('voiceBtn').textContent = 'üé§ Listening...';
                updateStatus('Listening... speak your command', false);
            };

            recognition.onend = () => {
                document.getElementById('voiceBtn').classList.remove('listening');
                document.getElementById('voiceBtn').textContent = 'üé§ Start Voice Command';
            };

            recognition.onresult = (event) => {
                const command = event.results[0][0].transcript.toLowerCase();
                updateStatus(`You said: "${command}"`, false);
                processVoiceCommand(command);
            };

            recognition.onerror = (event) => {
                const error = event.error;
                let message = 'Sorry, I didn\'t catch that. Please try again.';

                if (error === 'no-speech') {
                    message = 'No speech was detected. Please try again.';
                } else if (error === 'audio-capture') {
                    message = 'Audio capture failed. Check your microphone.';
                } else if (error === 'not-allowed') {
                    message = 'Permission to use microphone is blocked.';
                } else if (error === 'service-not-allowed') {
                    message = 'Voice recognition not allowed. Try using HTTPS.';
                } else if (error === 'network') {
                    message = 'Network error. Please check your internet connection.';
                }

                updateStatus(`Error: ${message} (${error})`);
                console.error('Speech recognition error:', error);
            };
        }

        // Process voice commands
        function processVoiceCommand(command) {
            command = command.toLowerCase();

            // Handle active voice context (confirmation)
            if (voiceContext) {
                if (voiceContext.type === 'confirm_add') {
                    if (command.includes('yes') || command.includes('sure') || command.includes('add') || command.includes('okay')) {
                        executeAddToCart(voiceContext.itemId);
                        voiceContext = null;
                        return;
                    } else if (command.includes('no') || command.includes('cancel') || command.includes('don\'t')) {
                        speak('Okay, cancelled.');
                        voiceContext = null;
                        return;
                    } else {
                        speak('Please say Yes to add it, or No to cancel.', () => {
                            if (recognition) try { recognition.start(); } catch (e) { }
                        });
                        return;
                    }
                } else if (voiceContext.type === 'confirm_remove') {
                    if (command.includes('yes') || command.includes('sure') || command.includes('remove') || command.includes('okay')) {
                        executeRemoveFromCart(voiceContext.index);
                        voiceContext = null;
                        return;
                    } else if (command.includes('no') || command.includes('cancel') || command.includes('don\'t')) {
                        speak('Okay, keeping item in cart.');
                        voiceContext = null;
                        return;
                    } else {
                        speak('Please say Yes to remove it, or No to cancel.', () => {
                            if (recognition) try { recognition.start(); } catch (e) { }
                        });
                        return;
                    }
                } else if (voiceContext.type === 'confirm_checkout') {
                    if (command.includes('yes') || command.includes('sure') || command.includes('place') || command.includes('okay')) {
                        executeCheckout();
                        voiceContext = null;
                        return;
                    } else if (command.includes('no') || command.includes('cancel') || command.includes('don\'t')) {
                        speak('Checkout cancelled. You can continue shopping.');
                        voiceContext = null;
                        return;
                    } else {
                        speak('Please say Yes to place order, or No to cancel.', () => {
                            if (recognition) try { recognition.start(); } catch (e) { }
                        });
                        return;
                    }
                }
            }

            if (command.includes('menu') || command.includes('show menu')) {
                showSection('menu');
            } else if (command.includes('cart') || command.includes('show cart')) {
                showSection('cart');
            } else if (command.includes('settings') || command.includes('show settings')) {
                showSection('settings');
            } else if (command.includes('checkout')) {
                checkout();
            } else if (command.includes('add')) {
                const item = findItemInCommand(command);
                if (item) {
                    addToCart(item.id);
                } else {
                    speak('Sorry, I couldn\'t find that item. Please try again.');
                }
            } else if (command.includes('remove')) {
                removeFromCartByName(command);
            } else if (command.includes('show') && (command.includes('south indian') || command.includes('fast food') || command.includes('snacks') || command.includes('dessert'))) {
                highlightCategory(command);
            } else if (command.includes('search for') || command.includes('find')) {
                searchItems(command);
            } else if (command.includes('what is') || command.includes('describe')) {
                describeItem(command);
            } else if (command.includes('total') || command.includes('how much')) {
                readTotal();
            } else if (command.includes('clear cart')) {
                cart = [];
                updateCart();
                speak('Cart cleared');
            } else if (command.includes('stop') || command.includes('quiet') || command.includes('silence')) {
                stopSpeaking();
            } else if (command.includes('repeat') || command.includes('say again')) {
                repeatLast();
            } else if (command.includes('help')) {
                showHelp();
            } else {
                // Fallback: Hint-based search (Implicit search)
                // Check if the command matches any item name or category
                const potentialSearch = menuItems.filter(item =>
                    item.name.toLowerCase().includes(command) ||
                    item.category.toLowerCase().includes(command) ||
                    item.description.toLowerCase().includes(command)
                );

                if (potentialSearch.length > 0) {
                    searchItems(command);
                } else {
                    speak('Sorry, I didn\'t understand that command. Say help for available commands.');
                }
            }
        }

        // Helper: Find item object from command string
        function findItemInCommand(command) {
            // Sort items by name length (descending) to match longest names first
            // This prevents "Chicken" matching "Chicken Biryani" incorrectly
            const sortedItems = [...menuItems].sort((a, b) => b.name.length - a.name.length);
            return sortedItems.find(item => command.includes(item.name.toLowerCase()));
        }

        // Voice Command Helpers

        function removeFromCartByName(command) {
            const itemToRemove = cart.find(item => command.includes(item.name.toLowerCase()));
            if (itemToRemove) {
                const index = cart.indexOf(itemToRemove);
                removeFromCart(index);
            } else {
                speak('I couldn\'t find that item in your cart.');
            }
        }

        function highlightCategory(command) {
            showSection('menu');
            let category = '';
            if (command.includes('south indian')) category = 'South Indian';
            else if (command.includes('fast food')) category = 'Fast Food';
            else if (command.includes('snacks')) category = 'Snacks';
            else if (command.includes('dessert')) category = 'Desserts';

            if (category) {
                // Find headers with this text
                const headers = Array.from(document.querySelectorAll('.category-title'));
                const targetHeader = headers.find(h => h.textContent === category);

                if (targetHeader) {
                    targetHeader.scrollIntoView({ behavior: 'smooth' });
                    targetHeader.style.color = '#E64A19'; // Highlight color
                    setTimeout(() => targetHeader.style.color = '', 2000);
                    speak(`Showing ${category} menu.`);
                }
            }
        }

        function searchItems(command) {
            showSection('menu');
            const query = command.replace('search for', '').replace('find', '').trim();
            if (!query) return;

            const matches = menuItems.filter(item =>
                item.name.toLowerCase().includes(query) ||
                item.description.toLowerCase().includes(query)
            );

            if (matches.length > 0) {
                speak(`Found ${matches.length} items matching ${query}. ${matches.map(i => i.name).join(', ')}.`);
                // Ideally scroll to first match, but simple readout is fine for now
            } else {
                speak(`No items found matching ${query}.`);
            }
        }

        function describeItem(command) {
            const item = findItemInCommand(command);
            if (item) {
                speak(`${item.name}: ${item.description}. It costs ‚Çπ${item.price}. Rating ${item.rating} stars.`);
            } else {
                speak('Which item would you like me to describe?');
            }
        }

        function readTotal() {
            const total = cart.reduce((sum, item) => sum + item.price, 0);
            speak(`The total price is ‚Çπ${total.toFixed(2)}.`);
        }

        function stopSpeaking() {
            window.speechSynthesis.cancel();
        }

        function repeatLast() {
            if (lastSpoken) {
                speak(lastSpoken);
            } else {
                speak('I haven\'t said anything yet.');
            }
        }

        // Show voice help
        function showHelp() {
            const helpText = `Available voice commands: 
                Say "show menu" to view the menu. 
                Say "show cart" to view your cart. 
                Say any item name like "Pizza" or "Dosa" to find it.
                Say "add" followed by an item name to add it. 
                Say "remove" followed by an item name to remove it.
                Say "checkout" to place your order.`;
            speak(helpText);
            updateStatus('Help: See available voice commands above', false);
        }

        // Checkout (Confirmation Wrapper)
        function checkout() {
            if (cart.length === 0) {
                speak('Your cart is empty. Please add items before checking out.');
                return;
            }
            const total = cart.reduce((sum, item) => sum + item.price, 0);
            const message = `Your total is ‚Çπ${total.toFixed(2)}. Do you want to place the order?`;
            voiceContext = { type: 'confirm_checkout' };
            speak(message, () => {
                if (recognition) try { recognition.start(); } catch (e) { }
            });
            updateStatus(`Confirm Checkout: Total ‚Çπ${total.toFixed(2)}. Say 'Yes' or 'No'.`, false);
        }

        // Execute Checkout (Actual Action)
        function executeCheckout() {
            const total = cart.reduce((sum, item) => sum + item.price, 0);
            const count = cart.length;
            speak(`Processing checkout. Your order of ${count} item${count !== 1 ? 's' : ''} totaling ‚Çπ${total.toFixed(2)} has been placed. Thank you for your order!`);
            updateStatus(`Order placed! Total: ‚Çπ${total.toFixed(2)}`);

            // Clear cart after a delay
            setTimeout(() => {
                cart = [];
                updateCart();
                showSection('menu');
            }, 3000);
        }

        // Event listeners
        document.getElementById('voiceBtn').addEventListener('click', () => {
            if (recognition) {
                recognition.start();
            } else {
                speak('Voice recognition is not supported in your browser. Please use Chrome or Edge.');
            }
        });

        document.getElementById('helpBtn').addEventListener('click', showHelp);

        document.getElementById('menuTab').addEventListener('click', () => showSection('menu'));
        document.getElementById('cartTab').addEventListener('click', () => showSection('cart'));
        document.getElementById('settingsTab').addEventListener('click', () => showSection('settings'));

        document.getElementById('checkoutBtn').addEventListener('click', checkout);

        // Settings event listeners
        document.getElementById('voiceSpeed').addEventListener('change', (e) => {
            voiceSettings.rate = parseFloat(e.target.value);
            speak('Voice speed updated');
        });

        document.getElementById('voiceVolume').addEventListener('change', (e) => {
            voiceSettings.volume = parseFloat(e.target.value);
            speak('Voice volume updated');
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            // Alt + M for menu
            if (e.altKey && e.key === 'm') {
                e.preventDefault();
                showSection('menu');
            }
            // Alt + C for cart
            if (e.altKey && e.key === 'c') {
                e.preventDefault();
                showSection('cart');
            }
            // Alt + S for settings
            if (e.altKey && e.key === 's') {
                e.preventDefault();
                showSection('settings');
            }
            // Alt + V for voice
            if (e.altKey && e.key === 'v') {
                e.preventDefault();
                document.getElementById('voiceBtn').click();
            }
        });

        // Initialize
        renderMenu();
        updateCart();
        speak('Welcome to EasyEats accessible food delivery. Use voice commands or keyboard shortcuts to navigate. Press the voice command button or say your command.');
    </script>
</body>

</html>
